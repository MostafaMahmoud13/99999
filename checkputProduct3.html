<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Checkout</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Discover and order high-quality posture correctors with fast delivery. Our website offers easy checkout and responsive design.">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      padding: 30px;
    }


    .checkout-box {
      max-width: 500px;
      margin: auto;
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    .info {
      margin: 10px 0;
      font-size: 18px;
    }

    .info span {
      font-weight: bold;
    }

    .back-link {
      display: inline-block;
      margin-top: 20px;
      text-align: center;
      width: 100%;
      color: #ff0000;
      text-decoration: none;
    }

    .back-link:hover {
      text-decoration: underline;
    }

    .total {
      font-size: 20px;
      font-weight: bold;
      text-align: center;
      margin-top: 20px;
      color: #28a745;
    }

    form input,
    form textarea,
    form select {
      width: 100%;
      padding: 10px;
      font-size: 15px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background-color: #fff;
      box-sizing: border-box;
    }

    @media (max-width: 768px) {
      .box {
        padding: 20px;
        margin: 10px;
      }

      h1 {
        font-size: 24px;
      }

      p {
        font-size: 16px;
      }
    }


    form input,
    form textarea,
    form select {
      font-size: 14px;
      padding: 8px;
    }

    .btn {
      padding: 10px 15px;
      font-size: 14px;
    }

    .product-img {
      width: 100%;
      max-width: 250px;
    }

    /* Animation الدخول */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.8s ease-out forwards;
    }

    /* Keyframes */
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* زرار فيه حركة */
    button:hover,
    .btn:hover {
      transform: scale(1.05);
      transition: 0.3s ease;
    }

    /* Smooth transition لكل العناصر */
    form input,
    form textarea,
    form select,
    button {
      transition: all 0.3s ease;
    }

    img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: auto;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
    }

    .container {
      max-width: 1000px;
      margin: 30px auto;
      padding: 20px;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    .product {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #eee;
      padding: 15px 0;
      flex-wrap: wrap;
    }

    .product img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      margin-right: 15px;
    }

    .product-info {
      flex: 1;
      display: flex;
      align-items: center;
    }

    .product-name {
      font-weight: bold;
      margin-right: 10px;
    }

    .product-price {
      color: #666;
      font-size: 14px;
    }

    .product-qty {
      margin: 10px 0;
      font-size: 14px;
    }

    .line-total {
      font-weight: bold;
      color: green;
      font-size: 16px;
    }

    .total {
      text-align: right;
      font-size: 20px;
      font-weight: bold;
      margin-top: 20px;
      color: #1e90ff;
    }

    @media (max-width: 768px) {
      .product-info {
        flex-direction: column;
        align-items: flex-start;
      }

      .product img {
        margin-bottom: 10px;
      }
    }

    .payment-methods {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      margin: 20px 0;
      gap: 10px;
    }

    .payment-option {
      flex: 1 1 45%;
      padding: 12px;
      border: 2px solid #ccc;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      background-color: #f9f9f9;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .payment-option:hover {
      border-color: #28a745;
      background-color: #eafaf1;
    }

    .payment-option.selected {
      border-color: #28a745;
      background-color: #eafaf1;
      color: #28a745;
    }

    #cardFields,
    #bankInstructions,
    #paypalInstructions {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: #fdfdfd;
    }

    .hidden {
      display: none;
    }

    .form-group label {
      font-weight: bold;
      margin-bottom: 5px;
      display: block;
    }

    .form-group input {
      padding: 10px;
      width: 100%;
      font-size: 14px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .submit-btn {
      margin-top: 20px;
      background-color: #28a745;
      color: white;
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      transition: background 0.3s ease;
    }

    .submit-btn:hover {
      background-color: #218838;
    }

    .error-msg {
      color: red;
      font-size: 13px;
      margin-top: 3px;
      display: block;
    }
  </style>
</head>

<body>
  <div class="checkout-box" class="fade-in">

    <div class="container">
      <h1>Your Selected Samples</h1>
      <div id="productContainer"></div>
      <div class="total">Total: $<span id="totalAmount">0.00</span></div>
    </div>


    <a href="index.html" class="back-link">← Back to Remove</a>
  </div>
  <hr style="margin: 30px 0;">

  <h3>🧍‍♂️ Customer Info</h3>
  <form id="orderForm">


    
    <input type="hidden" name="Order_Summary" id="orderSummary">
    <input type="hidden" name="_captcha" value="false">




    <!-- باقي عناصر الفورم زي الاسم، رقم التليفون، ... -->

    <label>Full Name</label><br>
    <input type="text" name="name" required><br><br>

    <label>Email</label><br>
    <input type="email" name="email" required>
    <span id="error-email" class="error-msg"></span><br><br>


    <label>Phone Number</label><br>
    <input type="tel" name="phone" required>
    <span id="error-phone" class="error-msg"></span><br><br>


    <label>Country</label><br>
    <select required name="country">
      <option value="" disabled selected>Select Country</option>
      <option value="USA">🇺🇸 United States</option>
      <option value="UK">🇬🇧 United Kingdom</option>
      <option value="Canada">🇨🇦 Canada</option>
      <option value="Germany">🇩🇪 Germany</option>
      <option value="Australia">🇦🇺 Australia</option>
      <option value="Spain">🇪🇸 Spain</option>
      <option value="Saudi Arabia">🇸🇦 Saudi Arabia</option>
      <option value="UAE">🇦🇪 UAE</option>
      <option value="Italy">🇮🇹 Italy</option>
    </select><br><br>




    <label for="">Choose Shipping Type</label><br>
    <select required name="shipping">
      <option value="" disabled selected>-- Select Type --</option>
      <option value="Home">🏠 Home</option>
      <option value="Office">🏢 Office</option>
      <option value="Other">📍 Other</option>
    </select><br><br>


    <label>The Address is Detailed</label><br>
    <textarea name="notes" rows="3" minlength="10" required></textarea><br><br>
    <div>
      <h3>🌍 We ship to Germany, France, Netherlands and more. Orders from Germany are processed with priority.
      </h3>
      <p>✅ 30-Day Money-Back Guarantee.
        🔒 Secure Checkout & Customer Support.
        🚚 Fast Delivery Available to EU Countries.</p>
    </div>

    <!-- Payment Section Start -->
    <div class="container">
      <h2>💳 Payment Information</h2>

      <div class="payment-methods">
        <div class="payment-option selected" data-method="card">💳 Credit / Debit Card</div>
        <div class="payment-option" data-method="cod">💵 Pay on Delivery</div>
        <div class="payment-option" data-method="bank">🏦 Bank Transfer</div>
        <div class="payment-option" data-method="paypal">🅿️ Pay with PayPal</div>
      </div>

      <div id="cardFields">
        <div class="form-group">
          <label>Cardholder Name</label>
          <input type="text" id="cardName" name="cardName" required>
          <span id="error-cardName" class="error-msg"></span>
        </div>
        <div class="form-group">
          <label>Card Number</label>
          <input type="text" id="cardNumber" name="cardNumber" maxlength="19" placeholder="e.g. 4111 1111 1111 1111"
            required>
          <span id="error-cardNumber" class="error-msg"></span>

        </div>
        <div class="form-group">
          <label>Expiry Date</label>
          <input type="text" id="expiry" name="expiry" maxlength="5" placeholder="MM/YY" required>
          <span id="error-expiry" class="error-msg"></span>

        </div>
        <div class="form-group">
          <label>CVV</label>
          <input type="text" id="cvv" name="cvv" maxlength="4" placeholder="e.g. 123" required>
          <span id="error-cvv" class="error-msg"></span>

        </div>
      </div>
      <!-- PayPal Section -->
      <div id="paypalInstructions" class="hidden">
        <p style="color: #333; font-weight: 500;">
          You will be redirected to PayPal to complete your payment. Please ensure your PayPal email is correct.
        </p>
        <div class="form-group">
          <label for="paypalEmail">PayPal Email</label>
          <input type="email" id="paypalEmail" name="paypalEmail">
          <span id="error-paypal" class="error-msg"></span>

        </div>
      </div>

      <!-- Bank Transfer Section -->
      <div id="bankInstructions" class="hidden">
        <p style="color: #333; font-weight: 500;">
          Please transfer the total amount to the account below. After the transfer, upload a screenshot to confirm
          payment.
        </p>
        <p><strong>Bank:</strong> Example Bank<br><strong>IBAN:</strong> DE00 5001 0517 5407 3249 31</p>
        <div class="form-group">
          <label for="bankNote">Transfer Note or Reference</label>
          <input type="text" id="bankNote" name="bankNote">
          <span id="error-name" class="error-msg"></span>
        </div>
      </div>

      <!-- Cash on Delivery Section -->
      <div id="codInstructions" class="hidden">
        <p style="color: #333; font-weight: 500;">
          Your order will be delivered to your address. Please keep the payment ready at delivery.
        </p>
      </div>
      <input type="hidden" name="paymentMethod" id="paymentMethod" value="card">
      <span id="error-name" class="error-msg"></span>

      <button type="submit" class="submit-btn" id="submitBtn">Pay Now</button>

    </div>
    <!-- Payment Section End -->



    </div>
    <!-- Payment Section End -->

  </form>

  <script>
    const methodOptions = document.querySelectorAll(".payment-option");
    const paymentInput = document.getElementById("paymentMethod");

    methodOptions.forEach(option => {
      option.addEventListener("click", () => {
        methodOptions.forEach(opt => opt.classList.remove("selected"));
        option.classList.add("selected");

        const method = option.getAttribute("data-method");
        paymentInput.value = method;

        document.getElementById("cardFields").classList.add("hidden");
        document.getElementById("paypalInstructions").classList.add("hidden");
        document.getElementById("bankInstructions").classList.add("hidden");
        document.getElementById("codInstructions").classList.add("hidden");

        if (method === "card") {
          document.getElementById("cardFields").classList.remove("hidden");
        } else if (method === "paypal") {
          document.getElementById("paypalInstructions").classList.remove("hidden");
        } else if (method === "bank") {
          document.getElementById("bankInstructions").classList.remove("hidden");
        } else if (method === "cod") {
          document.getElementById("codInstructions").classList.remove("hidden");
        }
      });
    });
  </script>


  <script>
    const container = document.getElementById("productContainer");
    const totalAmount = document.getElementById("totalAmount");

    const products = JSON.parse(localStorage.getItem("productList")) || [];
    let total = 0;

    products.forEach(p => {
      const lineTotal = p.price * p.qty;
      total += lineTotal;

      const productEl = document.createElement("div");
      productEl.className = "product";
      productEl.innerHTML = `
        <div class="product-info">
          <img src="${p.img}" alt="${p.name}" />
          <div>
            <div class="product-name">${p.name}</div>
            <div class="product-price">Price: $${p.price.toFixed(2)}</div>
            <div class="product-qty">Quantity: ${p.qty}</div>
          </div>
        </div>
        <div class="line-total">$${lineTotal.toFixed(2)}</div>
      `;
      container.appendChild(productEl);
    });

    totalAmount.textContent = total.toFixed(2);

    const summaryInput = document.getElementById("orderSummary");
    let summaryText = "";

    products.forEach(p => {
      if (p.qty > 0) {
        summaryText += `• ${p.name} - Qty: ${p.qty} - $${p.price.toFixed(2)}\\n`;
      }
    });

    summaryText += `\\nTotal: $${total.toFixed(2)}`;
    summaryInput.value = summaryText;

  </script>





  <script>
    function validateForm() {
      let isValid = true;

      const email = document.querySelector("input[name='email']").value.trim();
      const phone = document.querySelector("input[name='phone']").value.trim();
      const paypal = document.getElementById("paypalEmail")?.value.trim();
      const paymentMethod = document.getElementById("paymentMethod").value;
      const cardName = document.getElementById("cardName")?.value.trim();
      const cardNumber = document.getElementById("cardNumber")?.value.trim().replace(/\s/g, "");
      const expiry = document.getElementById("expiry")?.value.trim();
      const cvv = document.getElementById("cvv")?.value.trim();

      // Reset errors
      document.querySelectorAll(".error-msg").forEach(el => el.textContent = "");

      // Email validation
      if (!email.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/)) {
        document.getElementById("error-email").textContent = "Enter a valid email address.";
        isValid = false;
      }

      // Phone number validation
      if (!phone.match(/^\d{6,15}$/)) {
        document.getElementById("error-phone").textContent = "Enter a valid phone number.";
        isValid = false;
      }

      // PayPal Email validation
      if (paymentMethod === "paypal" && (paypal === "" || !paypal.includes("@"))) {
        document.getElementById("error-paypal").textContent = "Please enter your PayPal email.";
        isValid = false;
      }

      // Card Validation
      if (paymentMethod === "card") {
        if (cardName === "") {
          document.getElementById("error-cardName").textContent = "Cardholder name is required.";
          isValid = false;
        }

        if (!cardNumber.match(/^\d{16}$/)) {
          document.getElementById("error-cardNumber").textContent = "Enter a valid 16-digit card number.";
          isValid = false;
        }

        if (!expiry.match(/^(0[1-9]|1[0-2])\/\d{2}$/)) {
          document.getElementById("error-expiry").textContent = "Enter a valid expiry (MM/YY).";
          isValid = false;
        }

        if (!cvv.match(/^\d{3,4}$/)) {
          document.getElementById("error-cvv").textContent = "Enter a valid CVV.";
          isValid = false;
        }
      }

      return isValid;
    }


    document.getElementById("cardNumber").addEventListener("input", function (e) {
      this.value = this.value.replace(/\D/g, "").replace(/(.{4})/g, "$1 ").trim();
    });

    if (isValid) {
      return confirm("Are you sure you want to place the order?");
    }

  </script>

<script>
document.getElementById("orderForm").addEventListener("submit", async function(e) {
  e.preventDefault(); // يمنع الفورم من الإرسال التقليدي

  const formData = new FormData(this);
  const data = {};
  formData.forEach((value, key) => (data[key] = value));

  const response = await fetch("http://localhost:3000/submit", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

if (response.ok) {
  window.location.href = "thankyou-index.html";
} else {
  alert("❌ Failed to send order.");
}
});

  
</script>


</body>

</html>
